<ui:composition
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="./../commons/template.xhtml">

	<f:metadata>
		<f:event
			listener="#{usuarioSessionMB.validarSesion()}"
			type="preRenderView" />
		<f:event
			listener="#{usuarioSessionMB.mostrarMensajeValidacion()}"
			type="postAddToView" />
		<f:event 
			listener="#{usuarioSessionMB.validarAccesoPagina()}" 
			type="preRenderView"/>
			
	</f:metadata>

	<ui:define name="content">
		<p:panel	id="IDPanel"
					header=""
					style="#{msj['p.panelGrande']} margin-top: 10pt;">
			<h:form id="IDFrmPrincipal">
				<p:dataTable 	id="IDDataTblReporte" 
								value="#{reportesBean.depuraciones}"
								var="VDataTblReporte"	
								emptyMessage="#{msj['p.dataTable_emptyMessage']}"
								paginator="true" 
								rows="5"			
								editable="true">
			
					<p:column 	headerText="#{msj['reporte.pais']}" 
								filterBy="#{VDataTblReporte.metodo.agregador.pais.nombre}"
								filterMatchMode="contains">
						<h:outputText value="#{VDataTblReporte.metodo.agregador.pais.nombre}" />
					</p:column>
					<p:column 	headerText="#{msj['manto.parametrizacion.pais.codigo']}"
								filterBy="#{VDataTblReporte.metodo.agregador.pais.codigo}"
								filterMatchMode="contains">
						<h:outputText value="#{VDataTblReporte.metodo.agregador.pais.codigo}" />
					</p:column>
					<p:column 	headerText="#{msj['manto.parametrizacion.agregador.nombre']}"
								filterBy="#{VDataTblReporte.metodo.agregador.nombre_agregador}"
								filterMatchMode="contains">
						<h:outputText value="#{VDataTblReporte.metodo.agregador.nombre_agregador}" />
					</p:column>
					<p:column 	headerText="#{msj['manto.parametrizacion.metodo.nombre']}" 
								filterBy="#{VDataTblReporte.metodo.nombre}"
								filterMatchMode="contains">
						<h:outputText value="#{VDataTblReporte.metodo.nombre}" />
					</p:column>
					<p:column 	headerText="usuario" 
								filterBy="#{VDataTblReporte.usuarioSistema.usuario}"
								filterMatchMode="contains">
						<h:outputText value="#{VDataTblReporte.usuarioSistema.usuario}" />
					</p:column>
					<p:column 	headerText="fecha" 
								filterBy="#{VDataTblReporte.fechaTransaccion}"
								filterMatchMode="contains">
						<h:outputText value="#{VDataTblReporte.fechaTransaccion}" />
					</p:column>
					<p:column 	headerText="estado" 
								filterBy="#{VDataTblReporte.estadoTransaccion}"
								filterMatchMode="contains">
						<h:outputText value="#{VDataTblReporte.estadoTransaccion}" />
					</p:column>
					<p:column 	headerText="tipo" 
								filterBy="#{VDataTblReporte.tipoTransaccion}"
								filterMatchMode="contains">
						<h:outputText value="#{VDataTblReporte.tipoTransaccion}" />
					</p:column>
					<p:column 	headerText="suscriptor" 
								filterBy="#{VDataTblReporte.numero}"
								filterMatchMode="contains">
						<h:outputText value="#{VDataTblReporte.numero}" />
					</p:column>
					<p:column>
						<div style="float: left;">
							<p:commandLink 	styleClass="ui-icon ui-icon-pencil" 
											actionListener="#{reportesBean.cargarLog(VDataTblReporte)}"
											title="Editar Pais" 								
											update=":IDFrmPrincipal"  />
						</div>
					</p:column>
				</p:dataTable>	
			
				<div style="float: left;">
					<p:commandLink
						actionListener="#{reportesBean.execute}" 
						value="uno a uno">						
					</p:commandLink>
				</div>
			</h:form>
		</p:panel>

	</ui:define>

</ui:composition>